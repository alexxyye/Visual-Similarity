for (i in subj){
# subsetting data by subject
subj_i <- subset(Yoni_1_61, Yoni_1_61$Subject == i)    # getting data from a single subject
# cognitive condition
# 1st order
cog_1st_i <- subset(subj_i, subj_i$CogAffPhys == 'cognitive'|subj_i$FrstOrScndOrder == '1')
sum.cog.1_ACC <- sum(cog_1st_i$Stimulus.ACC)
sum.cog.1_RT <- mean(cog_1st_i$Stimulus.RT)
# 2nd order
cog_2nd_i <- subset(subj_i, subj_i$CogAffPhys == 'cognitive'|subj_i$FrstOrScndOrder == '2')
sum.cog.2_ACC <- sum(cog_2nd_i$Stimulus.ACC)
sum.cog.2_RT <- mean(cog_2nd_i$Stimulus.RT)
# affective condition
# 1st order
aff_1st_i <- subset(subj_i, subj_i$CogAffPhys == 'affect'|subj_i$FrstOrScndOrder == '1')
sum.aff.1_ACC <- sum(aff_1st_i$Stimulus.ACC)
sum.aff.1_RT <- mean(aff_1st_i$Stimulus.RT)
# 2nd order
aff_2nd_i <- subset(subj_i, subj_i$CogAffPhys == 'affect'|subj_i$FrstOrScndOrder == '2')
sum.aff.2_ACC <- sum(aff_2nd_i$Stimulus.ACC)
sum.aff.2_RT <- mean(aff_2nd_i$Stimulus.RT)
# physical condition
# 1st order
phy_1st_i <- subset(subj_i, subj_i$CogAffPhys == 'physical'|subj_i$FrstOrScndOrder == '1')
sum.phy.1_ACC <- sum(phy_1st_i$Stimulus.ACC)
sum.phy.1_RT <- mean(phy_1st_i$Stimulus.RT)
# 2nd order
phy_2nd_i <- subset(subj_i, subj_i$CogAffPhys == 'physical'|subj_i$FrstOrScndOrder == '2')
sum.phy.2_ACC <- sum(phy_2nd_i$Stimulus.ACC)
sum.phy.2_RT <- mean(phy_2nd_i$Stimulus.RT)
# storing data
data.ACC.Yoni[i, 1] <- i
data.ACC.Yoni[i, 2] <- sum.cog.1_ACC
data.ACC.Yoni[i, 3] <- sum.cog.2_ACC
data.ACC.Yoni[i, 4] <- sum.aff.1_ACC
data.ACC.Yoni[i, 5] <- sum.aff.2_ACC
data.ACC.Yoni[i, 6] <- sum.phy.1_ACC
data.ACC.Yoni[i, 7] <- sum.phy.2_ACC
data.RT.Yoni[i, 1] <- i
data.RT.Yoni[i, 2] <- sum.cog.1_RT
data.RT.Yoni[i, 3] <- sum.cog.2_RT
data.RT.Yoni[i, 4] <- sum.aff.1_RT
data.RT.Yoni[i, 5] <- sum.aff.2_RT
data.RT.Yoni[i, 6] <- sum.phy.1_RT
data.RT.Yoni[i, 7] <- sum.phy.2_RT
}
View(data.ACC.Yoni)
View(data.RT.Yoni)
data.Yoni <- merge(data.ACC.Yoni, data.RT.Yoni, by = "Sub_ID")
View(data.Yoni)
write_excel_csv(data.Yoni, file = "'D:/PL/Multimedia/Yoni/Data_Yoni_1_61.csv")
write_excel_csv2(data.Yoni, file = "'D:/PL/Multimedia/Yoni/Data_Yoni_1_61.csv")
write_excel_csv(data.Yoni, file = "D:/PL/Multimedia/Yoni/Data_Yoni_1_61.csv")
## load lib
library(readr)
## read data
Yoni_1_61 <- read_csv(file = 'D:/Alex/PL/Multimedia/TEI_raw.csv')
## load lib
library(readr)
## read data
TEI <- read_csv(file = 'D:/Alex/PL/Multimedia/TEI_raw.csv')
## load lib
library(readr)
## read data
TEI <- read_csv(file = 'D:/PL/Multimedia/TEI_raw.csv')
## load lib
library(readr)
## read data
TEI <- read_csv(file = 'D:/Alex/PL/Multimedia/TEI_raw.csv')
View(TEI)
## load lib
library(readr)
## read data
TEI <- read_csv(file = 'D:/Alex/PL/Multimedia/TEI_raw.csv')
View(TEI)
## load lib
library(readr)
## read data
TEI <- read_csv(file = 'D:/Alex/PL/Multimedia/TEI_raw.csv')
View(TEI)
View(TEI)
library(dplyr)
install.packages("dplyr")
library(dplyr)
subj_1 <- subset(TEI, TEI$Subject == 1)
a <- select(subj_i, c("Q16", "Q2", "Q18", "Q4", "Q5", "Q7", "Q22", "Q8", "Q10", "Q25", "Q26", "Q12", "Q13", "Q28", "Q14"))
select(subj_1, c("Q16", "Q2", "Q18", "Q4", "Q5", "Q7", "Q22", "Q8", "Q10", "Q25", "Q26", "Q12", "Q13", "Q28", "Q14"))
a <- select(subj_1, c("Q16", "Q2", "Q18", "Q4", "Q5", "Q7", "Q22", "Q8", "Q10", "Q25", "Q26", "Q12", "Q13", "Q28", "Q14"))
View(a)
View(subj_1)
View(TEI)
a <-formatC(TEI$Subject, width=1)
?mutate
## load lib
library(readr)
## read data
TEI <- read_csv(file = 'D:/Alex/PL/Multimedia/TEI_raw.csv')
View(TEI)
subj_1 <- subset(TEI, TEI$Subject == 1)
View(TEI)
## load lib
library(readr)
## read data
TEI <- read_csv(file = 'D:/Alex/PL/Multimedia/TEI_raw.csv')
View(TEI)
subj_1 <- subset(TEI, TEI$Subject == 1)
View(subj_1)
subj_1 %>%
select(Q16, Q2, Q18, Q4, Q5,
Q7, Q22, Q8, Q10, Q25,
Q26, Q12, Q13, Q28, Q14)
%>%
a <- c(1:10)
?data.frame
a <- data.frame(matrix(data = (1:30), nrow = 15, ncol = 2))
View(a)
View(a)
a <- data.frame(matrix(data = (1:30), nrow = 3, ncol = 10))
View(a)
a %>%
select(X1, X3, X5, X10)
%>%
?transmute
a %>%
select(X1, X3, X5, X10) %>%
transmute(
X1 = X1 *3,
X3 = 8- X3,
X5 = X5 ^2,
X10 = NULL
)
View(a)
a %>%
select(X1, X3, X5, X10) %>%
transmute(
X1 = X1 *3,
X3 = 8- X3,
X5 = X5 ^2,
X10 = NULL
)
View(a)
a1 <- a %>%
select(X1, X3, X5, X10) %>%
transmute(
X1 = X1 *3,
X3 = 8- X3,
X5 = X5 ^2,
X10 = NULL
)
View(a1)
a1 <- a %>%
transmute(
X1 = X1 *3,
X3 = 8- X3,
X5 = X5 ^2,
X10 = NULL
)
View(a1)
a <- data.frame(matrix(data = (1:30), nrow = 3, ncol = 10))
a1 <- a %>%
transmute(
X1 = X1 *3,
X3 = 8- X3,
X5 = X5 ^2,
X10 = NULL
)
View(a1)
a <- data.frame(matrix(data = (1:30), nrow = 3, ncol = 10))
a1 <- a %>%
mutate(
X1 = X1 *3,
X3 = 8- X3,
X5 = X5 ^2,
X10 = NULL
)
View(a1)
## load lib
library(readr)
## read data
TEI <- read_csv(file = 'D:/Alex/PL/Multimedia/TEI_raw.csv')
subj_1 <- subset(TEI, TEI$Subject == 1)
subj_1_cvt <- subj_1 %>%
select(Q16, Q2, Q18, Q4, Q5,
Q7, Q22, Q8, Q10, Q25,
Q26, Q12, Q13, Q28, Q14) %>%
mutate(
Q16 = 8- Q16,
Q2 = 8- Q2,
Q18 = 8- Q18,
Q4 = 8- Q4,
Q5 = 8- Q5,
Q7 = 8- Q7,
Q22 = 8- Q22,
Q8 = 8- Q8,
Q10 = 8- Q10,
Q25 = 8- Q25,
Q26 = 8- Q26,
Q12 = 8- Q12,
Q13 = 8- Q13,
Q28 = 8- Q28,
Q14 = 8- Q14)
View(subj_1_cvt)
subj_1_cvt <- subj_1 %>%
mutate(
Q16 = 8- Q16,
Q2 = 8- Q2,
Q18 = 8- Q18,
Q4 = 8- Q4,
Q5 = 8- Q5,
Q7 = 8- Q7,
Q22 = 8- Q22,
Q8 = 8- Q8,
Q10 = 8- Q10,
Q25 = 8- Q25,
Q26 = 8- Q26,
Q12 = 8- Q12,
Q13 = 8- Q13,
Q28 = 8- Q28,
Q14 = 8- Q14)
View(subj_1_cvt)
View(subj_1)
View(subj_1)
View(subj_1_cvt)
install.packages("tidyverse")
library(tidyverse)
## load lib
library(readr)
library(tidyverse)
## read data
TEI <- read_csv(file = 'D:/Alex/PL/Multimedia/TEI_raw.csv')
# converting score
TEI_cvt <- TEI %>%
mutate(
Q16 = 8- Q16,
Q2 = 8- Q2,
Q18 = 8- Q18,
Q4 = 8- Q4,
Q5 = 8- Q5,
Q7 = 8- Q7,
Q22 = 8- Q22,
Q8 = 8- Q8,
Q10 = 8- Q10,
Q25 = 8- Q25,
Q26 = 8- Q26,
Q12 = 8- Q12,
Q13 = 8- Q13,
Q28 = 8- Q28,
Q14 = 8- Q14
)
View(TEI_cvt)
cols_1 = c("Q5", "Q20", "Q9", "Q24", "Q12", "Q27")
Well_being_i <- TEI_cvt %>%
nest(cols_1) %>%
mutate(SUM = map_dbl(TEI_cvt, mean))
## load lib
library(readr)
library(tidyverse)
## read data
TEI <- read_csv(file = 'D:/Alex/PL/Multimedia/TEI_raw.csv')
## preparing tables
data.ACC <- data.frame(matrix(
data = NA,
nrow = 61,
ncol = 5,
dimnames = list(
NULL, c("Sub_ID", "Well_being", "Self_control", "Emotionality", "Sociability"))
)
)     # Creating data containing 61 rows of NA
# converting score
TEI_cvt <- TEI %>%
mutate(
Q16 = 8- Q16,
Q2 = 8- Q2,
Q18 = 8- Q18,
Q4 = 8- Q4,
Q5 = 8- Q5,
Q7 = 8- Q7,
Q22 = 8- Q22,
Q8 = 8- Q8,
Q10 = 8- Q10,
Q25 = 8- Q25,
Q26 = 8- Q26,
Q12 = 8- Q12,
Q13 = 8- Q13,
Q28 = 8- Q28,
Q14 = 8- Q14
)
# Well_being
cols_1 = c("Q5", "Q20", "Q9", "Q24", "Q12", "Q27")
Well_being_i <- TEI_cvt %>%
nest(cols_1) %>%
mutate(SUM = map_dbl(data, mean))
View(Well_being_i)
View(Well_being_i[[26]][[1]])
?apply
cols_1 = c("Q5", "Q20", "Q9", "Q24", "Q12", "Q27")
TEI_cvt$Well_being <- apply(TEI_cvt[, cols_1], 1, mean)
## load lib
library(readr)
library(tidyverse)
## read data
TEI <- read_csv(file = 'D:/Alex/PL/Multimedia/TEI_raw.csv')
## preparing tables
data.ACC <- data.frame(matrix(
data = NA,
nrow = 61,
ncol = 5,
dimnames = list(
NULL, c("Sub_ID", "Well_being", "Self_control", "Emotionality", "Sociability"))
)
)     # Creating data containing 61 rows of NA
# converting score
TEI_cvt <- TEI %>%
mutate(
Q16 = 8- Q16,
Q2 = 8- Q2,
Q18 = 8- Q18,
Q4 = 8- Q4,
Q5 = 8- Q5,
Q7 = 8- Q7,
Q22 = 8- Q22,
Q8 = 8- Q8,
Q10 = 8- Q10,
Q25 = 8- Q25,
Q26 = 8- Q26,
Q12 = 8- Q12,
Q13 = 8- Q13,
Q28 = 8- Q28,
Q14 = 8- Q14
)
# Well_being
cols_1 = c("Q5", "Q20", "Q9", "Q24", "Q12", "Q27")
TEI_cvt$Well_being <- apply(TEI_cvt[, cols_1], 1, mean)
View(TEI_cvt)
## load lib
library(readr)
library(tidyverse)
## read data
TEI <- read_csv(file = 'D:/Alex/PL/Multimedia/TEI_raw.csv')
## preparing tables
data.ACC <- data.frame(matrix(
data = NA,
nrow = 61,
ncol = 5,
dimnames = list(
NULL, c("Sub_ID", "Well_being", "Self_control", "Emotionality", "Sociability"))
)
)     # Creating data containing 61 rows of NA
# converting score
TEI_cvt <- TEI %>%
mutate(
Q16 = 8- Q16,
Q2 = 8- Q2,
Q18 = 8- Q18,
Q4 = 8- Q4,
Q5 = 8- Q5,
Q7 = 8- Q7,
Q22 = 8- Q22,
Q8 = 8- Q8,
Q10 = 8- Q10,
Q25 = 8- Q25,
Q26 = 8- Q26,
Q12 = 8- Q12,
Q13 = 8- Q13,
Q28 = 8- Q28,
Q14 = 8- Q14
)
# Well_being
cols_1 = c("Q5", "Q20", "Q9", "Q24", "Q12", "Q27")
TEI_cvt$Well_being <- apply(TEI_cvt[, cols_1], 1, mean)
# Self_control
cols_2 = c("Q4", "Q19", "Q7", "Q22", "Q15", "Q30")
TEI_cvt$Self_control <- apply(TEI_cvt[, cols_2], 1, mean)
# Emotionality
cols_3 = c("Q1", "Q16", "Q2", "Q17", "Q8", "Q23", "Q13", "Q28")
TEI_cvt$Emotionality <- apply(TEI_cvt[, cols_3], 1, mean)
# Sociability
cols_4 = c("Q6", "Q21", "Q10", "Q25", "Q11", "Q26")
TEI_cvt$Sociability <- apply(TEI_cvt[, cols_4], 1, mean)
View(TEI_cvt)
write_excel_csv(TEI_cvt, file = "D:/PL/Multimedia/Yoni/Data_TEI_1_61.csv")
library(metafor)
install.packages("metafor")
library(metafor)
### copy BCG vaccine meta-analysis data into 'dat'
dat <- dat.bcg
t of the data frame)
dat <- escalc(measure="RR", ai=tpos, bi=tneg, ci=cpos, di=cneg, data=dat,
slab=paste(author, year, sep=", "))
res <- rma(yi, vi, data=dat)
forest(res, atransf=exp, at=log(c(.05, .25, 1, 4)), xlim=c(-16,6),
ilab=cbind(tpos, tneg, cpos, cneg), ilab.xpos=c(-9.5,-8,-6,-4.5),
cex=.75, header="Author(s) and Year", mlab="")
op <- par(cex=.75, font=2)
text(c(-9.5,-8,-6,-4.5), res$k+2, c("TB+", "TB-", "TB+", "TB-"))
text(c(-8.75,-5.25),     res$k+3, c("Vaccinated", "Control"))
par(op)
View(dat)
?escalc
early_1 <- raw_df$Early.symbol_1 - raw_df$Early.word_1
raw_df <- read_csv("D:\Github\Visual-Similarity\EEG data\Raw Data.csv")
raw_df <- read_csv("D:\Github\Visual-Similarity\EEG data\Raw Data.csv")
raw_df <- read_csv("D:/Github/Visual-Similarity/EEG data/Raw Data.csv")
library(readr)
raw_df <- read_csv("D:/Github/Visual-Similarity/EEG data/Raw Data.csv")
early_1 <- raw_df$Early.symbol_1 - raw_df$Early.word_1
early_2 <- raw_df$Early.symbol_2 - raw_df$Early.word_2
early_3 <- raw_df$Early.symbol_3 - raw_df$Early.word_3
early_4 <- raw_df$Early.symbol_4 - raw_df$Early.word_4
early_5 <- raw_df$Early.symbol_5 - raw_df$Early.word_5
early_6 <- raw_df$Early.symbol_6 - raw_df$Early.word_6
early_7 <- raw_df$Early.symbol_7 - raw_df$Early.word_7
late_1 <- raw_df$Late.symbol_1 - raw_df$Late.word_1
late_2 <- raw_df$Late.symbol_2 - raw_df$Late.word_2
late_3 <- raw_df$Late.symbol_3 - raw_df$Late.word_3
late_4 <- raw_df$Late.symbol_4 - raw_df$Late.word_4
late_5 <- raw_df$Late.symbol_5 - raw_df$Late.word_5
late_6 <- raw_df$Late.symbol_6 - raw_df$Late.word_6
late_7 <- raw_df$Late.symbol_7 - raw_df$Late.word_7
early <- cbind(early_1, early_2, early_3, early_4, early_5, early_6, early_7)
late <- cbind(late_1, late_2, late_3, late_4, late_5, late_6, late_7)
#
df2 <- data.frame(matrix(data = NA, nrow = 7, ncol = 6))
colnames(df2) <- c("early.mean", "early.n", "early.sd", "late.mean", "late.n", "late.sd")
for (j in 1:7){
e <- as.vector(early[, j])
e_mean <- mean(e, na.rm = TRUE)
e_n <- sum(!is.na(early[, j]))
e_sd <- sd(e, na.rm = TRUE)
l <- as.vector(late[, j])
l_mean <- mean(l, na.rm = TRUE)
l_n <- sum(!is.na(late[, j]))
l_sd <- sd(l, na.rm = TRUE)
df2[j, 1] <- e_mean
df2[j, 2] <- e_n
df2[j, 3] <- e_sd
df2[j, 4] <- l_mean
df2[j, 5] <- l_n
df2[j, 6] <- l_sd
}
setwd("D:/Github/Visual-Similarity/EEG data/")
setwd("D:/Github/Visual-Similarity/")
meta_ori <- read_csv("./analysis/meta.csv")
meta_ori <- meta_ori[, -c(3:30)] # get what I want
df_early <- read_csv("./EEG data/raw_early.csv")
df_early <- df_early[, -1]
df_late <- read_csv("./EEG data/raw_late.csv")
df_late <- df_late[, -1]
# final meta_excel
meta_early <- cbind(meta_ori, df_early)
meta_late <- cbind(meta_ori, df_late)
meta <- cbind(meta_ori, df2)
meta_1 <- meta[1:4, ]
meta_2 <- meta[5:7, ]
library(meta)
library(metafor)
dat <- escalc(measure="SMD", n1i=early.n, n2i=late.n,
m1i=early.mean, m2i=late.mean,
sd1i=early.sd, sd2i=late.sd,
data=meta,
slab=paste(author, pubyear, sep=", "))
mod = metacont(
early.n,
early.mean,
early.sd,
late.n,
late.mean,
late.sd,
data = meta,
studlab = meta$author,
method.smd = "Hedges",
method.bias = "Egger")
yi <- mod$TE
vi <- mod$seTE
res <- rma(yi, vi, data=dat)
mlabfun <- function(text, res) {
list(bquote(paste(.(text),
" (Q = ", .(formatC(res$QE, digits=2, format="f")),
", df = ", .(res$k - res$p),
", p ", .(metafor:::.pval(res$QEp, digits=2, showeq=TRUE, sep=" ")), "; ",
I^2, " = ", .(formatC(res$I2, digits=1, format="f")), "%, ",
tau^2, " = ", .(formatC(res$tau2, digits=2, format="f")), ")")))}
?text
forest(res, xlim=c(-16, 4.6), at=log(c(0.05, 0.25, 1, 4)), atransf=exp,
ilab=cbind(early.n, early.mean, early.sd, late.n, late.mean, late.sd),
ilab.xpos=c(-15,-13.5, -12,-10,-8.5, -7), cex=1,
xlab = "Late N1 - Early N1 PTE",
order=1:7, rows=c(1:4,5:7),
mlab=mlabfun("RE Model for All Studies", res),
psize=2, header="Author(s) and Year")
### set font expansion factor (as in forest() above) and use a bold font
op <- par(cex=0.75, font=2)
text(c(-15,-13.5, -12,-10,-8.5, -7), 26, c("Early.N", "Early.Mean", "Early.SD",
"Late.N", "Late.Mean", "Late.SD"))
text(c(-13.5,-8.5), 27, c("Ealry N1", "Late N1"))
### switch to bold italic font
par(font=4)
text(-16, c(24,16,5), pos=4, c("Systematic Allocation",
"Random Allocation",
"Alternate Allocation"))
forest(res)
text(c(-15,-13.5, -12,-10,-8.5, -7), 26, c("Early.N", "Early.Mean", "Early.SD",
"Late.N", "Late.Mean", "Late.SD"))
text(c(-13.5,-8.5), 27, c("Ealry N1", "Late N1"))
write_csv(meta, "C:/Users/xinyiye/desktop")
write_csv(meta, "C:/Users/xinyiye/desktop/")
write_csv(meta, "C:/Users/xinyiye/desktop/meta.csv")
test_mod <- metacont(early.mean, early.n, early.sd, late.mean, late.n, late.sd, data=meta, sm="Hedges", method="REML", bias.adjust="eb")
test_mod <- metacont(early.mean, early.n, early.sd, late.mean, late.n, late.sd, data=meta, sm="Hedges", method="REML", bias.adjust="eb")
forest(mod)
forest(mod, xlab = "Early N1 - Late N1")
forest(mod, xlab = "Early N1 - Late N1", ilab = c("1", "2"))
